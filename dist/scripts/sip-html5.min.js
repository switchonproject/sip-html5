angular.module("eu.water-switch-on.sip",["eu.water-switch-on.sip.controllers","eu.water-switch-on.sip.directives","eu.water-switch-on.sip.services","eu.water-switch-on.sip.filters","eu.water-switch-on.sip.factories","de.cismet.cids.services","ui.router","ui.bootstrap.tpls","ngResource"]).config(["$stateProvider","$urlRouterProvider",function(a,b){"use strict";var c;c=function(a,b,c,d){var e,f,g;return e=b.defer(),g=d.getResourceObjects(),f=null,g&&angular.isArray(g)&&g.some(function(b){return b.id===a.resId&&(f=b),null!==f}),f?e.resolve(f):c.entityResource.get({classname:"resource",objId:a.resId}).$promise.then(function(a){e.resolve(a)},function(){e.reject("No resource with id found: "+a.resId)}),e.promise},b.otherwise("/map"),a.state("list",{url:"/list",templateUrl:"views/listView.html"}),a.state("th",{url:"/th",templateUrl:"views/thumbnailView.html"}),a.state("map",{url:"/map",templateUrl:"views/mapView.html"}),a.state("mapObject",{url:"/map/object/:resId",templateUrl:"views/mapView.html",controller:"eu.water-switch-on.sip.controllers.mapViewController",resolve:{resource:["$stateParams","$q","eu.water-switch-on.sip.services.SearchService","eu.water-switch-on.sip.services.shareService",c]}}),a.state("profile",{url:"/profile",templateUrl:"views/profileView.html"}),a.state("login",{url:"/login",templateUrl:"views/loginView.html"}),a.state("resourceDetail",{url:"/resource/:resId",templateUrl:"views/object-detail-view.html",controller:"eu.water-switch-on.sip.controllers.objectDetailController",resolve:{resource:["$stateParams","$q","eu.water-switch-on.sip.services.SearchService","eu.water-switch-on.sip.services.shareService",c]}})}]),angular.module("eu.water-switch-on.sip.controllers",["ui.bootstrap.dropdown","ui.bootstrap.alert","ui.bootstrap.modal","mgcrea.ngStrap.popover","ui.bootstrap.accordion","leaflet-directive","ui.bootstrap.progressbar","ui.bootstrap.buttons"]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.categoriesDirectiveController",["$scope","eu.water-switch-on.sip.services.TagGroupService","FilterExpression",function(a,b,c){"use strict";var d,e;this.expanded=!1,this.selectedCategory=null,d=a.filterExpressions.getFilterExpressionsByType(c.FILTER__COLLECTION),d&&0!==d.length||(console.warn("collection Filter Expressions not correctly initilaized"),a.filterExpressions.addFilterExpression(a.collectionFilterExpression)),e=a.filterExpressions.getFilterExpressionsByType(c.FILTER__TOPIC),e||0!==e.length||(console.warn("topic Filter Expressions not correctly initilaized"),a.filterExpressions.addFilterExpression(a.topicFilterExpression)),this.getCategories=function(a){return b.getCategoryList(a)},this.performCategoriesSearch=function(b,c){switch(a.filterExpressions.clear(),b){case"topic-inspire":a.topicFilterExpression.setStringValue(c);break;case"category-collection":a.collectionFilterExpression.setStringValue(c);break;default:return}a.performSearch()(0,!0),this.expanded=!1,this.selectedCategory=null}}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.countriesFilterDirectiveController",["$scope","eu.water-switch-on.sip.services.TagGroupService",function(a,b){"use strict";a.filterExpression.selectedCountry=null,a.countryList=b.getCountryList(a.countryGroup),a.$watch("filterExpression.selectedCountry",function(b,c){b&&b!==c&&b.length>0&&a.countryList.hasOwnProperty(b[0])&&a.filterExpression.value!==a.countryList[b[0]]&&(a.filterExpression.value=a.countryList[b[0]],a.filterExpression.displayValue=b[0])})}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.keywordFilterDirectiveController",["$scope","eu.water-switch-on.sip.services.TagGroupService","FilterExpression",function(a,b){"use strict";a.keywordGroup=a.keywordGroup||"keyword-free",a.keywordList=b.getKeywordList(a.keywordGroup)}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.listViewDirectiveController",["$scope","$filter","$modal","$rootScope","ngTableParams","eu.water-switch-on.sip.services.TagGroupService","eu.water-switch-on.sip.services.filterService","AppConfig",function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l;a.filterService=g,a.config=h.listView,a.tableParams=new e({page:1,sorting:i,count:2},{counts:[],total:1,getData:function(c,d){var e;e=d.sorting()&&a.filterService.isCompleteResult()&&a.filterService.getLoadedResourcesNumber()>1?b("orderBy")(a.tableData,d.orderBy()):a.tableData,c.resolve(e)}}),i={},i["object.name"]="asc",j={},k=function(a){if(a&&"query-keyword"!==a){var b=f.getKeywordList(a);b&&!b.$resolved?b.$promise.then(function(){j[a]=b.join("|").toLowerCase().split("|")}):b&&(j[a]=b.join("|").toLowerCase().split("|"))}},l=function(){var b,c,d,e;for(e=[],c=a.filterExpressions.getFilterExpressionsByType("keyword",!0),d=0;d<c.length;d++)b=c[d],b&&b.isValid()&&(b.value.constructor===Array?e=e.concat(b.value.join("|").toLowerCase().split("|")):e.push(b.value.toLowerCase()));j["query-keyword"]=e},k(a.config.highlightKeyword),a.showInfo=function(a){var b,e;e=d.$new(!0),e.object=a,b=c.open({templateUrl:"templates/object-info-modal-template.html",controller:"eu.water-switch-on.sip.controllers.objectInfoModalController",scope:e,size:"lg",backdrop:"static"})},a.showDownload=function(a){var b,e;e=d.$new(!0),e.object=a,b=c.open({templateUrl:"templates/object-download-modal-template.html",controller:"eu.water-switch-on.sip.controllers.objectDownloadModalController",scope:e,size:"lg",backdrop:"static"})},a.isHighlightKeyword=function(a,b){return b&&j.hasOwnProperty(a)?j[a].indexOf(b.toLowerCase())>-1:!1},a.$watch("tableData",function(){l(),a.tableParams.reload()})}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.mapViewController",["$scope","resource",function(a,b){"use strict";a.object=b}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.mapViewDirectiveController",["$scope","$window","$timeout","leafletData","de.cismet.cids.services.featureRendererService","AppConfig",function(a,b,c,d,e,f){"use strict";var g,h,i,j,k,l,m,n,o,p,q,r,s,t;p=f.mapView,angular.extend(a,{defaults:{tileLayer:p.backgroundLayer,minZoom:p.minZoom,path:{weight:10,color:"#800000",opacity:1}}}),h=function(c){a.currentHeight=b.innerHeight-a.navbarHeight,a.currentWidth=b.innerWidth-(a.toolbarShowing?a.toolbarWidth:0),d.getMap("mainmap").then(function(a){a.invalidateSize(c)})},a.currentHeight=b.innerHeight-a.navbarHeight,a.currentWidth=b.innerWidth-(a.isResultShowing?a.toolbarWidth:0),a.$watch("toolbarShowing",function(){c(function(){h(!0)},500)}),a.center=p.home,s=p.maxBounds&&angular.isArray(p.maxBounds.southWest)?L.latLng(p.maxBounds.southWest[0],p.maxBounds.southWest[1]):L.latLng(90,-180),t=p.maxBounds&&angular.isArray(p.maxBounds.northEast)?L.latLng(p.maxBounds.northEast[0],p.maxBounds.northEast[1]):L.latLng(-90,180),a.maxBounds=L.latLngBounds(s,t),d.getMap("mainmap").then(function(b){b.setMaxBounds(a.maxBounds)}),angular.element(b).bind("resize",function(){h(!1)}),j=L.Icon.extend({options:{shadowUrl:null,iconAnchor:new L.Point(16,31),iconSize:new L.Point(32,32),iconUrl:"images/search_point_icon_32.png"}}),o=new Wkt.Wkt,l=new L.FeatureGroup,g=new L.Control.Draw({draw:{polyline:!1,polygon:{shapeOptions:{color:"#800000"},showArea:!0,metric:!0},rectangle:{shapeOptions:{color:"#800000",clickable:!1},metric:!0},circle:!1,marker:!1},edit:{featureGroup:l}}),d.getMap("mainmap").then(function(b){b.addLayer(l),b.addControl(g),b.on("draw:created",function(a){n(a.layer)}),b.on("draw:deleted",function(b){b.layers.eachLayer(function(b){b===a.searchGeomLayer&&n(null)})})}),n=function(b){l.removeLayer(a.searchGeomLayer),a.searchGeomLayer=b,null!==b&&l.addLayer(a.searchGeomLayer),a.centerSearchGeometry&&l.getLayers().length>0&&d.getMap("mainmap").then(function(b){b.fitBounds(l.getBounds(),{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0},maxZoom:a.preserveZoomOnCenter?b.getZoom():null})})},i=!1,a.$watch("searchGeomLayer",function(b,c){var d;i?i=!1:void 0!==b&&b!==c&&(null===b?d="":(o.fromObject(b),d=o.write()),i=!0,a.searchGeomWkt=d,a.searchGeomTitle=o.type)}),a.$watch("searchGeomWkt",function(b,c){if(i)i=!1;else if(b&&b!==c)try{o.read(b),i=!0,n(o.toObject({color:"#800000",icon:new j}))}catch(d){l.removeLayer(a.searchGeomLayer),a.searchGeomLayer=void 0,a.searchGeomWkt=null}else null===b&&(l.removeLayer(a.searchGeomLayer),a.searchGeomLayer=void 0)}),k=new L.FeatureGroup,d.getMap("mainmap").then(function(a){k.addTo(a)}),m=function(b){var c,f;for(k.clearLayers(),c=0;c<b.length;++c)f=e.getFeatureRenderer(b[c]),f&&k.addLayer(f);a.centerObjects&&k.getLayers().length>0&&d.getMap("mainmap").then(function(b){b.fitBounds(k.getBounds(),{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0},maxZoom:a.preserveZoomOnCenter?b.getZoom():null})})},q=function(a){d.getMap("mainmap").then(function(b){k.setStyle(e.defaultStyle),"function"==typeof a.setStyle&&a.setStyle(e.highlightStyle),"function"==typeof a.getBounds&&a.getBounds()?b.fitBounds(a.getBounds(),{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0},maxZoom:null}):"function"==typeof a.getLatLng&&a.getLatLng()&&b.setView(a.getLatLng(),10,{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0}})})},r=function(b){if(b){var c,d,f;if(a.objects&&a.objects>0)for(d=a.objects.length,c=0;d>c;++c)if(a.objects[c].id===b.id)return void(k.getLayers().length>c&&q(k.getLayers()[c]));f=e.getFeatureRenderer(b),f&&(k.addLayer(f),q(f))}},a.$watch("objects",function(a,b){a&&a!==b&&m(a)}),a.objects&&!a.object&&m(a.objects),a.$watch("object",function(b,c){b&&b!==c&&!a.object&&r(b)}),a.object&&r(a.object),a.$watch("selectedObject",function(a){-1!==a&&k.getLayers().length>a&&q(k.getLayers()[a])})}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.masterController",["$scope","$rootScope","$modal","eu.water-switch-on.sip.services.SearchService","$state","FilterExpressions","FilterExpression","eu.water-switch-on.sip.services.TagGroupService","AppConfig","eu.water-switch-on.sip.services.shareService","eu.water-switch-on.sip.services.masterToolbarService","eu.water-switch-on.sip.services.filterService",function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m;a.config=i,a.data={},a.data.message="Welcome to the SWITCH-ON Spatial Information Platform!",a.data.messageType="success",a.data.selectedObject=-1,a.data.categories=h.getKeywordList("category-default"),a.state=e,a.masterToolbarService=k,a.filterExpressions=new f,a.geoFilterExpression=new g(g.FILTER__GEO,null,!1,!0,"templates/geo-editor-popup.html","Geography","Spatial Extent"),a.geoFilterExpression.getDisplayValue=function(a){return a&&-1!==a.indexOf("(")?a.substring(0,a.indexOf("(")):"invalid"},a.geoFilterExpression.setStringValue=function(a){var b;if(a){b=new Wkt.Wkt;try{b.read(a),this.value=a}catch(c){console.warn('could not parse WKT string "'+a+'"')}}},a.filterExpressions.addFilterExpression(a.geoFilterExpression),a.limitFilterExpression=new g(g.FILTER__OPTION_LIMIT,a.config.search.defautLimit,!1,!0,"templates/limit-editor-popup.html","Results Limit","Results Limit"),a.limitFilterExpression.setStringValue=function(b){b&&(this.value=parseInt(b,10)),isNaN(this.value)&&(this.value=this.defaultValue),this.value>a.config.searchService.maxLimit&&(this.value=a.config.searchService.maxLimit)},a.filterExpressions.addFilterExpression(a.limitFilterExpression),a.offsetFilterExpression=new g(g.FILTER__OPTION_OFFSET,0,!1,!1),a.offsetFilterExpression.setStringValue=function(a){a&&(this.value=parseInt(a,10)),isNaN(this.value)&&(this.value=0)},a.filterExpressions.addFilterExpression(a.offsetFilterExpression),a.textFilterExpression=new g(g.FILTER__TEXT,null,!1,!1,null,"Fulltext","Title and Description Search"),a.filterExpressions.addFilterExpression(a.textFilterExpression),a.postSearchFiltersFilterExpression=new g(g.FILTER__POST_SEARCH_FILTERS,[],!0,!0,null,"Exclusions"),a.postSearchFiltersFilterExpression.getDisplayValue=function(a){return a&&-1!==a.indexOf(":")&&a.length>3?a.substring(a.indexOf(":")+2,a.length-1):a},a.filterExpressions.addFilterExpression(a.postSearchFiltersFilterExpression),a.collectionFilterExpression=new g(g.FILTER__COLLECTION,null,!1,!0,null,"Data Collection","Data Collections"),a.filterExpressions.addFilterExpression(a.collectionFilterExpression),a.topicFilterExpression=new g(g.FILTER__TOPIC,null,!1,!0,null,"Topic Categories","INSPIRE Topic Categories"),a.filterExpressions.addFilterExpression(a.topicFilterExpression),a.postSearchFilterExpressions=new f,a.data.resultSet=null,a.data.resultObjects=[],a.data.searchStatus={current:0,max:0,objects:0,type:null,message:null},a.activateView=function(a){e.go(a,{})},a.doCloseMessage=function(){a.data.message=null},a.showMessage=function(b,c){a.data.message=b,a.data.messageType=c},a.$watch("data.searchGeomWkt",function(b,c){void 0!==b&&b!==c&&(a.filterExpressions.geo||(a.filterExpressions.geo=new g("geo")),a.filterExpressions.geo.value=b,a.filterExpressions.geo.displayValue="GEOMETRY FROM MAP")}),a.$watch("data.resultSet.$collection",function(b,c){var d,e,f,g,h;if(b&&b!==c&&b.length>0){for(e=[],d=0;d<b.length;++d)e.push(b[d].object);a.data.resultObjects=e,a.data.selectedObject=-1,j.setResourceObjects(e),l.setResultSet(a.data.resultSet),f="Showing "+a.data.resultSet.$length+" of "+a.data.resultSet.$total+" resources",a.data.resultSet.$length<a.data.resultSet.$total&&(g=Math.floor(a.data.resultSet.$total/a.data.resultSet.$limit),g+=a.data.resultSet.$total%a.data.resultSet.$limit!==0?1:0,h=a.data.resultSet.$offset/a.data.resultSet.$limit,f+=" (page "+(h+1)+" of "+g+")"),a.data.message=f,a.data.messageType="success"}}),a.performSearch=function(b,c){var e,f;a.limitFilterExpression.value=a.limitFilterExpression.value||a.config.searchService.defautLimit,f=a.limitFilterExpression.value,!b||0>b?(b=0,a.offsetFilterExpression.value=0):a.offsetFilterExpression.value=b,b>0&&f>0&&b%f!==0&&(b=0,a.offsetFilterExpression.value=0),c===!0&&a.config.postSearchFilter.performImplicitSearch===!0&&a.postSearchFiltersFilterExpression.isValid()&&a.postSearchFiltersFilterExpression.clear(),e=a.filterExpressions.universalSearchString,a.data.resultSet=d.search(e,a.config.tagFilter.tagGroups,f,b,m),a.showProgress(a.data.searchStatus)},a.showProgress=function(d){var e;e=b.$new(!0),e.status=d,a.progressModal=c.open({templateUrl:"templates/search-progress-modal-template.html",scope:e,size:"lg",backdrop:"static"}),a.progressModal.opened.then(function(){"error"===a.data.searchStatus.type&&a.progressModal.close()})},m=function(b,c,d){a.data.searchStatus.max=c,a.data.searchStatus.type=d,-1===c&&"success"===d?(a.data.searchStatus.current=b,100>b?(a.data.message="Search for resource Meta-Data is in progress, please wait.",a.data.messageType="success",a.data.searchStatus.message=a.data.message):(a.data.message="The SWITCH-ON Meta-Data Repository is under heavy load, please wait for the search to continue.",a.data.messageType="warning",a.data.searchStatus.message=a.data.message,a.data.searchStatus.type="warning")):b>0&&c>b&&"success"===d?(a.data.searchStatus.objects=b,a.data.searchStatus.current=100+b/c*100,a.data.message="Collecting meta-data of resource #"+b+" of "+c,a.data.messageType="info",a.data.searchStatus.message=a.data.message):b===c&&"success"===d?(b>0?(a.data.searchStatus.current=200,a.data.message="Search completed, Meta-Data of "+b+(b>1?" resources":" resource")+" retrieved from the SWITCH-ON Meta-Data Repository.",a.data.messageType="success",a.data.searchStatus.message=a.data.message,a.config.search.showListView===!0&&a.activateView("list")):(a.data.searchStatus.current=200,a.data.message="Search completed, but no matching resources found in the SWITCH-ON Meta-Data Repository.",a.data.messageType="warning",a.data.searchStatus.message=a.data.message),a.progressModal&&setTimeout(function(){a.progressModal.close()},500)):"error"===d&&(a.data.searchStatus.current=200,a.data.message="Search could not be perfomed: "+a.data.resultSet.$error,a.data.messageType="danger",a.data.searchStatus.message=a.data.message,a.progressModal&&setTimeout(function(){a.progressModal.close()},500))}}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.myProfileDirectiveController",["$scope","eu.water-switch-on.sip.services.sessionService",function(a,b){"use strict";a.user=b.getCurrentUser()}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.myWorkspaceDirectiveController",["$scope","$state","$timeout","eu.water-switch-on.sip.services.sessionService",function(a,b,c,d){"use strict";a.user=d.getCurrentUser(),a.sessionService=d,a.status={},a.status.isopen=!1,a.status.scheduleOpen=!1,a.showProfile=function(){b.go("profile",{})},a.popup=function(b){b?(a.status.scheduleOpen=!0,c(function(){a.status.scheduleOpen===!0&&(a.status.isopen=!0),a.status.scheduleOpen=!1},300)):(a.status.scheduleOpen=!1,a.status.isopen=!1)}}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.objectDetailController",["$scope","resource","AppConfig",function(a,b,c){"use strict";var d,e;for(a.config=c.objectInfo,a.object=b,a.reps=a.object.representation||[],a.keywordsXcuahsi=[],a.keywords=[],d=0;d<a.reps.length;++d)a.reps[d]._status={open:0===d?!0:!1};if(a.object.tags)for(d=0;d<a.object.tags.length;++d)e=a.object.tags[d],0===e.taggroup.name.indexOf("keyword")&&(-1!==e.taggroup.name.indexOf("X-CUAHSI")?a.keywordsXcuahsi.push(e):a.keywords.push(e))}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.postSearchFilterDirectiveController",["$scope","FilterExpression","AppConfig","eu.water-switch-on.sip.services.filterService",function(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l;a.config=c.postSearchFilter,j=c.filterExpressionPattern,e=a.filterExpressions.getFilterExpressionsByType(b.FILTER__POST_SEARCH_FILTERS),e||0!==e.length||(console.warn("post search filters filter expression not correctly initialized!"),a.filterExpressions.addFilterExpression(a.postSearchFiltersFilterExpression)),f=new b("!"+b.FILTER__ACCESS_CONDITION,[],!0,!0,null,"Access Condition (Excluded)"),a.filterExpressions.addFilterExpression(f),f=new b("!"+b.FILTER__FUNCTION,[],!0,!0,null,"Access Function (Excluded)"),a.filterExpressions.addFilterExpression(f),f=new b("!"+b.FILTER__ACCESS_CONDITION,[],!0,!0,null,"Access Conditions"),a.postSearchFilterExpressions.addFilterExpression(f),f=new b("!"+b.FILTER__FUNCTION,[],!0,!0,null,"Access Functions"),a.postSearchFilterExpressions.addFilterExpression(f),i=function(c){a.postSearchFilterExpressions.clear();var d,e,f,h,i,j;if(c&&0!==c.length)for(d=0;d<c.length;++d)if(h=c[d],h&&h.value&&h.value.length>0){for(i="!"+h.key,f=a.postSearchFilterExpressions.getFilterExpressionsByType(i),f&&0!==f.length?e=f[0]:(e=new b(i,null,!0),a.postSearchFilterExpressions.addFilterExpression(e)),e.value=[],j=0;j<h.value.length;++j)e.value.push(h.value[j]);e.removeCallBack||(e.removeCallBack=g),e.enumeratedTags=e.enumerateTags(!0)}},h=function(c){c&&c instanceof b.prototype.CollectionTag?i(a.filterTags):c&&k(c.getValue())},l=function(a){var c,d,e;if(a&&a instanceof b.prototype.CollectionTag)for(c=a.getValue(),e=0;e<c.length;++e)d=a.origin.concatFilter(a.origin.parameter,c[e]),k(d);else a&&k(a.origin.concatFilter(a.origin.parameter,a.getValue()))},a.postSearchFiltersFilterExpression.removeCallBack||(a.postSearchFiltersFilterExpression.removeCallBack=h),k=function(b){var c,d,e,f,g,h,i,k;if(e=b.split(j),f=e[1],i=e[2],f&&i)for(g=0;g<a.filterTags.length;++g)if(k=a.filterTags[g],k&&k.value&&k.value.length>0&&f==="!"+k.key)for(h=0;h<k.value.length;++h)k.value[h].key===i&&(c=a.postSearchFilterExpressions.getFilterExpressionsByType(f),c&&c.length>0&&(d=c[0],d.setArrayValue(k.value[h])&&(d.enumeratedTags=d.enumerateTags(!0))))},g=function(c){if(c){var e,f,g,h,i;a.config.groupPostSearchFilters===!0?(g=c.getFilterExpressionString(),a.postSearchFiltersFilterExpression.setArrayValue(g)):(e=a.filterExpressions.getFilterExpressionsByType(c.getType()),e&&0!==e.length?f=e[0]:(f=new b(c.getType(),null,!0),a.filterExpressions.addFilterExpression(f)),f.setArrayValue(c.getValue()),f.removeCallBack||(f.removeCallBack=l)),h=a.filterExpressions.getFilterExpressionsByType(b.FILTER__OPTION_OFFSET),h&&h.length>0&&(i=h[0],i.value=0),c.origin.enumeratedTags=c.origin.enumerateTags(!0),a.config.performImplicitSearch!==!0||d.isCompleteResult()!==!1&&a.config.applyFilterLocally!==!1||a.performSearch()(0,!1)}},a.$watch("postSearchFiltersFilterExpression.value",function(b,c){a.config.applyFilterLocally===!0&&d.isCompleteResult()===!0&&b!==c&&(d.filterResultSet(a.postSearchFiltersFilterExpression),a.removeThreshold=d.getLoadedResourcesNumber()-d.getFilteredResourcesNumber(),a.notificationFunction&&(d.getFilteredResourcesNumber()>0?a.notificationFunction()(d.getFilteredResourcesNumber()+" of "+d.getLoadedResourcesNumber()+" resources hidded by filter.","warning"):a.notificationFunction()("Showing "+d.getLoadedResourcesNumber()+" of "+d.getTotalResourcesNumber()+" resources","success")))},!0),a.$watch("filterTags",function(a,b){a&&a!==b&&a.length>0&&i(a)})}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.searchFilterRibbonDirectiveController",["$scope","FilterExpression","AppConfig",function(a,b,c){"use strict";var d,e,f,g,h;if(a.config=c.search,a.keywordsFilterExpression=new b(b.FILTER__KEYWORD,[],!0,!0,null,"Keywords","Free Keywords"),a.filterExpressions.addFilterExpression(a.keywordsFilterExpression),a.keywordsCuashiFilterExpression=new b(b.FILTER__KEYWORD_XCUAHSI,[],!0,!0,"templates/filter-expression-editor-popup.html","X-CUAHSI Keyword","X-CUAHSI Keyword"),a.filterExpressions.addFilterExpression(a.keywordsCuashiFilterExpression),a.topicFilterExpression=new b(b.FILTER__TOPIC,null,!1,!0,null,"Topic Categories","INSPIRE Topic Categories"),a.filterExpressions.addFilterExpression(a.topicFilterExpression),a.fromDateFilterExpression=new b(b.FILTER__DATE_START,null,!1,!0,null,"Start Date","Start Date"),a.filterExpressions.addFilterExpression(a.fromDateFilterExpression),a.toDateFilterExpression=new b(b.FILTER__DATE_END,null,!1,!0,null,"End Date","End Date"),a.filterExpressions.addFilterExpression(a.toDateFilterExpression),a.geoIntersectsFilterExpression=new b(b.FILTER__GEO_INTERSECTS,"false",!1,!0,null,"Geo Intersection","Geo Intersection"),a.filterExpressions.addFilterExpression(a.geoIntersectsFilterExpression),a.geoBufferFilterExpression=new b(b.FILTER__GEO_BUFFER,null,!1,!0,"templates/geo-buffer-editor-popup.html","Geo Buffer","Geo Buffer"),a.filterExpressions.addFilterExpression(a.geoBufferFilterExpression),g=a.filterExpressions.getFilterExpressionsByType(b.FILTER__OPTION_LIMIT),!(g&&g.length>0))throw"limit filter expression not correctly initialized!";if(a.limitFilterExpression=g[0],h=a.filterExpressions.getFilterExpressionsByType(b.FILTER__OPTION_OFFSET),!(h&&h.length>0))throw"offset filter expression not correctly initialized!";if(a.offsetFilterExpression=h[0],d=a.filterExpressions.getFilterExpressionsByType(b.FILTER__GEO),!(d&&d.length>0))throw"geo filter expression not correctly initialized!";if(a.geoFilterExpression=d[0],e=a.filterExpressions.getFilterExpressionsByType(b.FILTER__TEXT),!(e&&e.length>0))throw"text filter expression not correctly initialized!";if(a.textFilterExpression=e[0],f=a.filterExpressions.getFilterExpressionsByType(b.FILTER__TOPIC),!(f&&f.length>0))throw"topic category filter expression not correctly initialized!";a.topicFilterExpression=f[0],a.geoIntersectsFilterExpression.getDisplayValue=function(a){return a?"intersect":"enclose"},a.clear=function(){a.filterExpressions.clear()}}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.searchFilterTagDirectiveController",["$scope","FilterExpression",function(a,b){"use strict";a.tag.isEditable()&&(a.data={},a.data.editorValue=a.tag.getValue()),a.getTagIcon=function(a){var c;switch(c=a.substr(a.indexOf("!")+1)){case b.FILTER__KEYWORD:return"glyphicon glyphicon-tags";case b.FILTER__KEYWORD_XCUAHSI:return"glyphicon glyphicon-copyright-mark";case b.FILTER__TOPIC:return"glyphicon glyphicon-tag";case b.FILTER__GEO:return"glyphicon glyphicon-globe";case b.FILTER__DATE_START:return"glyphicon glyphicon-chevron-left";case b.FILTER__DATE_END:return"glyphicon glyphicon-chevron-right";case b.FILTER__TEXT:return"glyphicon glyphicon-pencil";case b.FILTER__GEO_INTERSECTS:return"glyphicon glyphicon-log-out";case b.FILTER__GEO_BUFFER:return"glyphicon glyphicon-record";case b.FILTER__OPTION_LIMIT:return"glyphicon glyphicon-indent-right";case b.FILTER__CATEGORY:return"glyphicon glyphicon-bookmark";case b.FILTER__POST_SEARCH_FILTERS:return"glyphicon glyphicon-warning-sign";case b.FILTER__ACCESS_CONDITION:return"glyphicon glyphicon-euro";case b.FILTER__FUNCTION:return"glyphicon glyphicon-floppy-save";case b.FILTER__COLLECTION:return"glyphicon glyphicon-bookmark";default:return"glyphicon glyphicon-flash"}},a.getTagStyle=function(a,c,d){var e,f;if(e=c===!0?"switchon-close-icon-":"",0===a.indexOf("!")&&d===!0)return e+"label-danger";switch(f=a.substr(a.indexOf("!")+1)){case b.FILTER__KEYWORD:return e+"label-success";case b.FILTER__KEYWORD_XCUAHSI:return e+"label-info";case b.FILTER__TOPIC:return e+"label-success";case b.FILTER__GEO:return e+"label-success";case b.FILTER__DATE_START:return e+"label-success";case b.FILTER__DATE_END:return e+"label-success";case b.FILTER__TEXT:return e+"label-info";case b.FILTER__GEO_INTERSECTS:return e+"label-warning";case b.FILTER__GEO_BUFFER:return e+"label-warning";case b.FILTER__OPTION_LIMIT:return e+"label-warning";case b.FILTER__CATEGORY:return e+"label-success";case b.FILTER__POST_SEARCH_FILTERS:return e+"label-danger";case b.FILTER__ACCESS_CONDITION:return e+"label-success";case b.FILTER__FUNCTION:return e+"label-success";default:return e+"label-default"}}}]),angular.module("eu.water-switch-on.sip.controllers").controller("eu.water-switch-on.sip.controllers.usbDirectiveController",["$scope","FilterExpression","AppConfig",function(a,b,c){"use strict";var d,e,f;a.config=c.search,a.pattern=c.filterExpressionPattern,d=a.filterExpressions.getFilterExpressionsByType(b.FILTER__TEXT),d&&0!==d.length||(console.warn("text filter expression not correctly initialized"),a.filterExpressions.addFilterExpression(a.textFilterExpression)),e=a.textFilterExpression.value,a.$watch("universalSearchBox.filterExpressionInput.$error.required",function(b,c){c===!1&&b===!0&&a.filterExpressions.enumeratedTags.length<1&&a.notificationFunction({message:"Please define a Filter Expression or enter a query to search for resources in the SIP Meta-Data Repository",type:"info"})}),a.$watch("filterExpressions.list",function(){if(f=a.textFilterExpression.value,f&&f!==e){if(f&&f.length>0&&b.FILTER_EXPRESSION_PATTERNS.test(f)){var c,d,g,h,i;for(i=f,h=f.split(b.FILTER_EXPRESSION_PATTERNS),d=0;d<h.length;++d)g=h[d],c=a.filterExpressions.fromUniversalSearchString(g),c&&(i=i.replace(g,""),i=i.trim(),a.notificationFunction({message:'Search filter "'+c.getName()+'" successfully applied',type:"success"}));i.length>0?a.textFilterExpression.setStringValue(i):a.textFilterExpression.clear()}}else a.filterExpressions.enumeratedTags=a.config.combineMultileFilterExpressions===!0?a.filterExpressions.getTags(!1,!1,!1,!0):a.filterExpressions.enumerateTags(!1,!1,!1,!0);e=a.textFilterExpression.value},!0)}]),angular.module("eu.water-switch-on.sip.directives",["ngTable","ui.bootstrap.tabs","ui.bootstrap.typeahead","mgcrea.ngStrap.tooltip"]),angular.module("eu.water-switch-on.sip.directives").directive("categories",[function(){"use strict";return{restrict:"E",templateUrl:"templates/categories-directive-template.html",scope:{filterExpressions:"=",collectionFilterExpression:"=",topicFilterExpression:"=",performSearch:"&searchFunction"},controller:"eu.water-switch-on.sip.controllers.categoriesDirectiveController",controllerAs:"categoriesDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("countriesFilter",[function(){"use strict";return{restrict:"E",templateUrl:"templates/countries-filter-directive.html",scope:{filterExpression:"=",countryGroup:"@"},controller:"eu.water-switch-on.sip.controllers.countriesFilterDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("dateFilter",[function(){"use strict";return{restrict:"E",templateUrl:"templates/datefilter-directive.html",scope:{fromDateFilterExpression:"=",toDateFilterExpression:"="}}}]),angular.module("eu.water-switch-on.sip.directives").directive("keywordFilter",[function(){"use strict";return{restrict:"E",templateUrl:"templates/keyword-filter-directive.html",scope:{filterExpression:"=",keywordGroup:"@",multiple:"@"},controller:"eu.water-switch-on.sip.controllers.keywordFilterDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("listView",[function(){"use strict";return{restrict:"E",templateUrl:"templates/list-view-directive.html",scope:{filterExpressions:"=",tableData:"=",selectedObject:"="},controller:"eu.water-switch-on.sip.controllers.listViewDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("mapView",[function(){"use strict";return{restrict:"E",templateUrl:"templates/map-view-directive.html",scope:{searchGeomWkt:"=",searchGeomTitle:"=",centerSearchGeometry:"=",preserveZoomOnCenter:"=",objects:"=",object:"=",centerObjects:"=",selectedObject:"=",toolbarShowing:"=",toolbarWidth:"=",navbarHeight:"="},controller:"eu.water-switch-on.sip.controllers.mapViewDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("masterToolbar",[function(){"use strict";var a,b;return b={resultSet:"=",selectedObject:"=",filterExpressions:"=",postSearchFilterExpressions:"=",postSearchFiltersFilterExpression:"=",filterTags:"=",performSearch:"&",notificationFunction:"&?"},a=["$scope","$state","eu.water-switch-on.sip.services.masterToolbarService","AppConfig",function(a,b,c,d){var e,f;a.shouldShow=!1,a.masterToolbarService=c,a.config=d,f={},this.toggleVisibility=function(b,c){var d,g;if(b){f[b]=c,g=!1;for(d in f)f.hasOwnProperty(d)&&(g=g||f[d]);a.shouldShow=g,a.shouldShow&&e()}},e=function(){var d;return c.setCanShow(a.shouldShow&&a.resultSet&&a.resultSet.$collection&&a.resultSet.$collection.length>0&&("list"===b.current.name||"th"===b.current.name||"map"===b.current.name||"resourceDetails"===b.current.name)),d=c.getCanShow(),a.config.masterToolbar.alwaysExpanded&&d&&!c.isShowing()&&c.toggleVisibility(!0),d},a.$watchCollection("resultSet.$collection",function(){e()}),a.$on("$stateChangeSuccess",function(){e()})}],{restrict:"E",templateUrl:"templates/master-toolbar-template.html",controller:a,scope:b}}]),angular.module("eu.water-switch-on.sip.directives").directive("myProfile",[function(){"use strict";return{restrict:"E",templateUrl:"templates/my-profile-directive.html",scope:{},controller:"eu.water-switch-on.sip.controllers.myProfileDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("myWorkspace",[function(){"use strict";return{restrict:"E",templateUrl:"templates/my-workspace-directive.html",scope:{workspaceName:"@",showMessage:"&"},controller:"eu.water-switch-on.sip.controllers.myWorkspaceDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("postsearchfilter",["$state",function(a){"use strict";var b,c;return c={filterExpressions:"=",postSearchFilterExpressions:"=",postSearchFiltersFilterExpression:"=",filterTags:"=",performSearch:"&searchFunction",notificationFunction:"&?",removeThreshold:"="},b=function(b,c,d,e){var f;f=function(a){b.isVisible="list"===a||"th"===a,e.toggleVisibility("resultList",b.isVisible)},b.$on("$stateChangeSuccess",function(a,b){f(b.name)
}),f(a.current.name)},{restrict:"E",require:"^masterToolbar",templateUrl:"templates/post-search-filter-directive.html",scope:c,controller:"eu.water-switch-on.sip.controllers.postSearchFilterDirectiveController",controllerAs:"postSearchFilterDirectiveController",link:b}}]),angular.module("eu.water-switch-on.sip.directives").directive("resultList",["$state",function(a){"use strict";var b,c;return c={resultSet:"=",selectedObject:"="},b=function(b,c,d,e){var f;f=function(a){b.isVisible="map"===a,e.toggleVisibility("resultList",b.isVisible)},b.$on("$stateChangeSuccess",function(a,b){f(b.name)}),f(a.current.name)},{restrict:"E",require:"^masterToolbar",templateUrl:"templates/resultlist-directive.html",scope:c,link:b}}]),angular.module("eu.water-switch-on.sip.directives").directive("resultPager",["$state","FilterExpression",function(a,b){"use strict";var c,d;return d={resultSet:"=",filterExpressions:"=",getPerformSearch:"&searchFunction"},c=function(c,d,e,f){var g,h,i,j,k;k=function(a){c.isVisible="list"===a||"th"===a||"map"===a,f.toggleVisibility("resultPager",c.isVisible)},c.$on("$stateChangeSuccess",function(a,b){k(b.name)}),k(a.current.name),i=c.filterExpressions.getFilterExpressionsByType(b.FILTER__OPTION_LIMIT),i&&i.length>0?h=i[0]:(h=new b(b.FILTER__OPTION_LIMIT,10,!0,!1),c.filterExpressions.addFilterExpression(h)),c.hasPrevious=function(){return c.resultSet&&c.resultSet.$offset>0},c.previous=function(){c.resultSet.$resolved===!0&&c.hasPrevious()&&(g=c.resultSet.$limit,g!==h.value?j=0:(j=c.resultSet.$offset-g,j=j<c.resultSet.$total-g?j:c.resultSet.$offset,j=j>=0?j:0),c.getPerformSearch()(j,!1))},c.hasNext=function(){return c.resultSet&&c.resultSet.$length<c.resultSet.$total&&c.resultSet.$offset<=c.resultSet.$total-c.resultSet.$limit},c.next=function(){c.resultSet.$resolved===!0&&c.hasNext()===!0&&(g=c.resultSet.$limit,g!==h.value?j=0:(j=c.resultSet.$offset+g,j=j<c.resultSet.$total?j:c.resultSet.$offset),c.getPerformSearch()(j,!1))}},{restrict:"E",require:"^masterToolbar",templateUrl:"templates/result-pager-template.html",scope:d,link:c}}]),angular.module("eu.water-switch-on.sip.directives").directive("searchFilterRibbon",[function(){"use strict";return{restrict:"E",templateUrl:"templates/search-filter-ribbon-directive.html",scope:{filterExpressions:"=",performSearch:"&searchFunction",notificationFunction:"&?"},controller:"eu.water-switch-on.sip.controllers.searchFilterRibbonDirectiveController"}}]),angular.module("eu.water-switch-on.sip.directives").directive("searchFilterTag",["FilterExpression",function(a){"use strict";return{restrict:"EA",templateUrl:"templates/search-filter-tag-directive-template.html",scope:{tag:"=",highlightNegated:"=?",removeThreshold:"="},controller:"eu.water-switch-on.sip.controllers.searchFilterTagDirectiveController",link:function(b){!b.tag.isEditable()||b.tag instanceof a.prototype.CollectionTag||b.$on("tooltip.hide",function(){var a;b.tag.origin.value!==b.data.editorValue&&(b.data.applyChangesOnClose?b.tag.origin.value=b.data.editorValue:b.data.editorValue=b.tag.origin.value,a=b.$root.$$phase,"$apply"!==a&&"$digest"!==a&&b.$apply())})}}}]),angular.module("eu.water-switch-on.sip.directives").directive("searchOptions",[function(){"use strict";return{restrict:"E",templateUrl:"templates/search-options-directive.html",scope:{geoIntersectsFilterExpression:"=",geoBufferFilterExpression:"=",limitFilterExpression:"="}}}]),angular.module("eu.water-switch-on.sip.directives").directive("usb",[function(){"use strict";return{restrict:"E",templateUrl:"templates/usb-directive.html",scope:{textFilterExpression:"=",filterExpressions:"=",performSearch:"&searchFunction",notificationFunction:"&?"},controller:"eu.water-switch-on.sip.controllers.usbDirectiveController"}}]),angular.module("eu.water-switch-on.sip.factories").factory("AppConfig",[function(){"use strict";var a={};return a.listView={},a.listView.highlightKeyword="query-keyword",a.listView.filterKeyword=null,a.listView.keywordsLimit=5,a.searchService={},a.searchService.username="admin@SWITCHON",a.searchService.password="cismet",a.searchService.defautLimit=10,a.searchService.maxLimit=50,a.searchService.host="http://tl-ap001.xtr.deltares.nl/switchon_server_rest",a.mapView={},a.mapView.backgroundLayer="http://{s}.opentopomap.org/{z}/{x}/{y}.png",a.mapView.home={},a.mapView.home.lat=49.245166,a.mapView.home.lng=6.936809,a.mapView.home.zoom=4,a.mapView.maxBounds={},a.mapView.maxBounds.southWest=[90,-180],a.mapView.maxBounds.northEast=[-90,180],a.mapView.minZoom=2,a.gui={},a.gui.dev=!1,a.tagFilter={},a.tagFilter.tagGroups="access-condition, function",a.search={},a.search.clearPostSearchFilters=!0,a.search.combineMultileFilterExpressions=!0,a.search.showListView=!0,a.search.defautLimit=a.searchService.defautLimit,a.postSearchFilter={},a.postSearchFilter.groupPostSearchFilters=!0,a.postSearchFilter.performImplicitSearch=!1,a.postSearchFilter.implicitSearchDelay=1e3,a.postSearchFilter.applyFilterLocally=!0,a.postSearchFilter.expandPostSearchFilters=!0,a.objectInfo={},a.objectInfo.resourceJsonUrl="http://"+a.searchService.username+":"+a.searchService.password+"@"+a.searchService.host.replace(/.*?:\/\//g,""),a.objectInfo.resourceXmlUrl="http://tl-ap001.xtr.deltares.nl/demo_csw?request=GetRecordById&service=CSW&version=2.0.2&namespace=xmlns%28csw=http://www.opengis.net/cat/csw/2.0.2%29&resultType=results&outputSchema=http://www.isotc211.org/2005/gmd&outputFormat=application/xml&ElementSetName=full&id=",a.filterExpressionPattern=/(^!?[A-Za-z_\-]+):"([\s\S]+)"$/,a.masterToolbar={},a.masterToolbar.togglebutton=!1,a.masterToolbar.alwaysExpanded=!0,a}]),angular.module("eu.water-switch-on.sip.factories").factory("FilterExpression",[function(){"use strict";function a(a,b,c,d,e,f,g){if(void 0===a||null===a)throw"The parameter property of a FilterExpression cannot be null!";if(this.parameter=a,this.defaultValue=void 0===b?null:b,this.multiple=c===!0?!0:!1,this.value=void 0===b?this.multiple?[]:null:null!==this.defaultValue&&"object"==typeof this.defaultValue?JSON.parse(JSON.stringify(this.defaultValue)):this.defaultValue,this.name=void 0===f?null:f,!this.name&&this.multiple)throw'For the array-type filter expression "'+a+'", the name parameter is mandatory!';this.notFilter=0===this.parameter.indexOf("!")?!0:!1,this.visible=void 0===d?!0:d,this.editor=e||(this.multiple===!0?"templates/filter-expression-editor-popup.html":null),this.description=void 0===g?null:g,this.enumeratedTags=[]}return a.prototype.getDisplayValue=function(a){return a||this.getName()||this.value},a.prototype.getName=function(){return this.name||this.parameter},a.prototype.isValid=function(){return this.multiple===!0?this.value&&this.value.constructor===Array&&this.value.length>0:this.value?!0:!1},a.prototype.isVisible=function(){return this.visible===!0?!0:!1},a.prototype.isNotFilter=function(){return this.notFilter===!0?!0:!1},a.prototype.concatFilter=function(b,c){if(b===a.FILTER__POST_SEARCH_FILTERS)return c;var d=b+':"'+c+'"';return d},a.prototype.getFilterExpressionString=function(){var a,b,c;if(this.isValid())if(this.isMultiple())for(b=this.value.length,c=0;b>c;c++)0===c?a=this.concatFilter(this.parameter,this.getArrayValue(c)):(a+=" ",a+=this.concatFilter(this.parameter,this.getArrayValue(c)));else a=this.concatFilter(this.parameter,this.value);return a},a.prototype.setArrayValue=function(a){return this.isMultiple()&&(this.value||(this.value=[]),-1===this.value.indexOf(a))?(this.value.push(a),!0):!1},a.prototype.getArrayValue=function(a){return this.isMultiple()?!this.value||a>=this.value.length?null:this.value[a]:this.value},a.prototype.isMultiple=function(){return this.multiple===!0},a.prototype.clear=function(){this.value=null!==this.defaultValue&&"object"==typeof this.defaultValue?JSON.parse(JSON.stringify(this.defaultValue)):this.defaultValue,this.enumeratedTags=[]},a.prototype.enumerateTags=function(a){var b,c,d,e;if(b=[],this.isMultiple())for(d=this.value.length,c=0;d>c;c++)e=a===!0?new this.PostFilterTag(this,this.getArrayValue(c)):new this.Tag(this,this.getArrayValue(c)),b.push(e);else{if(a===!0)throw'error enumerating post filter tags for filter expression "'+this.parameter+'", Post Filter Tags can only be enumerated for array-type filter expressions!';e=new this.Tag(this,this.value),b.push(e)}return b},a.prototype.getTag=function(){var a;return a=this.isMultiple()?this.value&&1===this.value.length?new this.Tag(this,this.value[0]):new this.CollectionTag(this,this.value):new this.Tag(this,this.value)},a.prototype.setStringValue=function(a){this.isMultiple()?this.setArrayValue(a):this.value=a},a.prototype.getName=function(){return this.name||this.parameter},a.prototype.Tag=function(a,b){if(void 0===a||null===a)throw console.error("The filterExpression property of a FilterTag cannot be null!"),"The filterExpression property of a FilterTag cannot be null!";this.origin=a,this.value=b},a.prototype.Tag.constructor=a.prototype.Tag,a.prototype.Tag.prototype.getTitle=function(){return this.origin.getName()},a.prototype.Tag.prototype.getType=function(){return this.origin.parameter},a.prototype.Tag.prototype.isEditable=function(){return this.origin.isMultiple()?!1:this.origin.editor?!0:!1},a.prototype.Tag.prototype.getEditor=function(){return this.origin.editor},a.prototype.Tag.prototype.isRemoveable=function(){return!0},a.prototype.Tag.prototype.getValue=function(){return this.value},a.prototype.Tag.prototype.getDisplayValue=function(a){return this.origin.getDisplayValue(a?a:this.getValue())},a.prototype.Tag.prototype.getCardinality=function(){return 0},a.prototype.Tag.prototype.remove=function(){if(this.origin.isMultiple()){var a;a=this.origin.value.indexOf(this.value),-1!==a&&this.origin.value.splice(a,1)}else this.origin.value=null;this.origin.removeCallBack&&this.origin.removeCallBack(this)},a.prototype.Tag.prototype.getFilterExpressionString=function(){return this.origin.isMultiple()?this.getType()+':"'+this.getValue()+'"':this.origin.getFilterExpressionString()},a.prototype.CollectionTag=function(b,c){a.prototype.Tag.call(this,b,c)},a.prototype.CollectionTag.prototype=Object.create(a.prototype.Tag.prototype),a.prototype.CollectionTag.constructor=a.prototype.CollectionTag,a.prototype.CollectionTag.prototype.getDisplayValue=function(){return this.getTitle()},a.prototype.CollectionTag.prototype.isEditable=function(){return this.origin.editor?!0:!1},a.prototype.CollectionTag.prototype.getCardinality=function(){return this.origin.value&&this.origin.isMultiple()?this.origin.value.length:0},a.prototype.CollectionTag.prototype.remove=function(){this.origin.value=null,this.origin.removeCallBack&&this.origin.removeCallBack(this)},a.prototype.CollectionTag.prototype.getFilterExpressionString=function(){return this.origin.getFilterExpressionString()},a.prototype.PostFilterTag=function(b,c){if(!c&&!c.hasOwnProperty("key")&&!c.hasOwnProperty("value"))throw'The value of the PostFilterTag for the filter expression "'+b+'" is not valid! {key:..., value:...} object expected!';a.prototype.Tag.call(this,b,c),this.cardinality=c&&c.hasOwnProperty("value")?parseInt(c.value,10):0,this.cardinality=isNaN(this.cardinality)?0:this.cardinality},a.prototype.PostFilterTag.prototype=Object.create(a.prototype.Tag.prototype),a.prototype.PostFilterTag.constructor=a.prototype.PostFilterTag,a.prototype.PostFilterTag.prototype.isRemoveable=function(a){return this.origin.value.length>1&&this.getCardinality()>0&&(a?this.getCardinality()<a:!0)},a.prototype.PostFilterTag.prototype.getCardinality=function(){return this.cardinality},a.prototype.PostFilterTag.prototype.getValue=function(){return this.value.key},a.FILTER_EXPRESSION_PATTERNS=/(!?[A-Za-z_\-]+?:"[\s\S]+?["]{1})+/g,a.FILTER_EXPRESSION_PATTERN=/(^!?[A-Za-z_\-]+):"([\s\S]+)"$/,a.FILTER__GEO="geo",a.FILTER__GEO_INTERSECTS="geo-intersects",a.FILTER__GEO_BUFFER="geo-buffer",a.FILTER__KEYWORD="keyword",a.FILTER__KEYWORD_XCUAHSI="keyword-x-cuahsi",a.FILTER__TOPIC="topic",a.FILTER__COLLECTION="collection",a.FILTER__DATE_START="fromDate",a.FILTER__DATE_END="toDate",a.FILTER__OPTION_LIMIT="limit",a.FILTER__OPTION_OFFSET="offset",a.FILTER__TEXT="text",a.FILTER__POST_SEARCH_FILTERS="POST_SEARCH_FILTERS",a.FILTER__ACCESS_CONDITION="access-condition",a.FILTER__FUNCTION="function",a.FILTER__PROTOCOL="protocol",a.FILTER__RESOURE_TYPE="resource-type",a.FILTERS=[a.FILTER__GEO,a.FILTER__GEO_INTERSECTS,a.FILTER__GEO_BUFFER,a.FILTER__KEYWORD,a.FILTER__KEYWORD_XCUAHSI,a.FILTER__TOPIC,a.FILTER__COLLECTION,a.FILTER__DATE_START,a.FILTER__DATE_END,a.FILTER__OPTION_LIMIT,a.FILTER__OPTION_LIMIT,a.FILTER__OPTION_OFFSET,a.FILTER__TEXT,a.FILTER__POST_SEARCH_FILTERS,a.FILTER__ACCESS_CONDITION,a.FILTER__FUNCTION,a.FILTER__PROTOCOL,a.FILTER__RESOURE_TYPE],Object.defineProperties(a.prototype,{valid:{get:function(){return this.isValid()}}}),a.prototype.constructor=a,a}]),angular.module("eu.water-switch-on.sip.services").factory("FilterExpressions",["FilterExpression",function(a){"use strict";function b(){this.list=[],this.enumeratedTags=[]}return Object.defineProperties(b.prototype,{universalSearchString:{get:function(){var b,c,d,e,f;for(b=Object.keys(this.list),c=b.length,d="",e=0;c>e;e++)f=this.list[b[e]],f instanceof a&&f.isValid()&&(0===d.length?d=f.getFilterExpressionString():d+=" "+f.getFilterExpressionString());return d},set:function(a){console.warn("Attempt to set value of universalSearchString to "+a+" is not supported by FilterExpression Class")}}}),b.prototype.clear=function(){var b,c,d,e;for(b=Object.keys(this.list),c=b.length,d=0;c>d;d++)e=this.list[b[d]],e instanceof a&&e.clear();this.enumeratedTags=[]},b.prototype.addFilterExpression=function(b){return b instanceof a?(this.list.push(b),!0):!1},b.prototype.removeFilterExpression=function(a){var b,c;for(b=!1,c=this.list.length-1;c>=0;c--)this.list[c]===a&&(this.list.splice(c,1),b=!0);return b},b.prototype.getFilterExpressionsByType=function(a,b){var c,d,e;for(e=[],d=this.list.length,c=0;d>c;c++)b&&-1!==this.list[c].parameter.indexOf(a)?e.push(this.list[c]):this.list[c].parameter===a&&e.push(this.list[c]);return e},b.prototype.enumerateTags=function(a,b,c,d){var e,f,g,h,i;for(h=[],e=this.list.length,f=0;e>f;f++)g=this.list[f],!g.isVisible()&&!a||!g.isValid()&&!b||g.value===g.defaultValue&&!c||g.isNotFilter()&&!d||(i=g.enumerateTags(),i.length>0&&(h=h.concat(i)));return h},b.prototype.getTags=function(a,b,c,d){var e,f,g,h,i;for(h=[],e=this.list.length,f=0;e>f;f++)g=this.list[f],!g.isVisible()&&!a||!g.isValid()&&!b||g.value===g.defaultValue&&!c||g.isNotFilter()&&!d||(i=g.getTag(),i&&h.push(i));return h},b.prototype.fromUniversalSearchString=function(b){var c,d,e,f,g;return b&&b.length>0&&(c=b.split(a.FILTER_EXPRESSION_PATTERN),d=c[1],e=c[2],d&&e&&(d=d.toLowerCase(),g=this.getFilterExpressionsByType(d),!g||g.length<1?(f=new a(d),f.value=e,f.displayValue=e,console.warn('The search filter "'+d+'" is unknown. The search may deliver unexpected results.'),this.addFilterExpression(f)):(f=g[0],f.setStringValue(e)))),f},b}]),angular.module("eu.water-switch-on.sip.factories",[]),angular.module("eu.water-switch-on.sip.filters",[]),angular.module("eu.water-switch-on.sip.filters").filter("txtLen",function(){"use strict";var a,b;return a=/[-\/\\^$*+?.()|[\]{}]/g,b=function(b,c){return new RegExp("["+b.replace(a,"\\$&")+"]",c)},function(a,c,d,e,f,g){var h,i,j,k,l,m,n;if(!a||void 0===c||null===c)return null;if(c>=a.length)m=a;else if(h=void 0===d||null===d?!1:d,k=void 0===e||null===e?"[...]":e,i=void 0===f||null===f?!1:f,j=void 0===g||null===g?".!?;:":g,i&&0===c)l=a.match(b(j,"")),m=l?l.index>=a.length-1?a:a.substr(0,l.index+1)+" "+k:k;else{if(m=a.substr(0,c-k.length),i){for(n=b(j,"g"),l=0;null!==n.exec(m.substr(0,m.length-1));)l=n.lastIndex;l>0&&(m=m.substr(0,l+1)+" ")}h?m+=k:(l=m.match(/\s+\w*$/),l?m=m.substr(0,l.index+1)+k:m+=k)}return m}}),angular.module("eu.water-switch-on.sip.services",[]),angular.module("de.cismet.cids.services",[]),angular.module("de.cismet.cids.services").factory("de.cismet.cids.services.featureRendererService",[function(){"use strict";var a,b,c,d;return b=new Wkt.Wkt,c={color:"#0000FF",fill:!1,weight:2,riseOnHover:!0,clickable:!1},d={fillOpacity:.4,fill:!0,fillColor:"#1589FF",riseOnHover:!0,clickable:!1},a=function(a){var d,e,f;return e=null,a&&a.$self&&"/switchon.resource"===a.$self.substr(0,18).toLowerCase()&&(a.representation&&a.representation.every(function(c){var f,g;return c.name&&c.contentlocation&&c.type&&"aggregated data"===c.type.name&&c["function"]&&"service"===c["function"].name&&c.protocol&&"OGC:WMS-1.1.1-http-get-capabilities"===c.protocol.name&&(f=c.contentlocation,g=c.name,e=L.tileLayer.wms(f,{layers:g,format:"image/png",transparent:!0,version:"1.1.1"}),e.getBounds=function(){return a.spatialcoverage&&a.spatialcoverage.geo_field?(d=a.spatialcoverage.geo_field,b.read(d.substr(d.indexOf(";")+1)),b.toObject().getBounds()):void 0}),null===e}),!e&&a.spatialcoverage&&a.spatialcoverage.geo_field&&(d=a.spatialcoverage.geo_field,b.read(d.substr(d.indexOf(";")+1)),f=Object.create(c),a.name&&(f.title=a.name),e=b.toObject(f))),e},{getFeatureRenderer:a,defaultStyle:c,highlightStyle:d}}]),angular.module("eu.water-switch-on.sip.services").factory("eu.water-switch-on.sip.services.filterService",["FilterExpression","AppConfig",function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o;return j=b.filterExpressionPattern,l={},l[a.FILTER__ACCESS_CONDITION]="access conditions",l[a.FILTER__KEYWORD_XCUAHSI]="keywords - X-CUAHSI",l[a.FILTER__KEYWORD]="keywords - free",l[a.FILTER__PROTOCOL]="protocol",l[a.FILTER__FUNCTION]="function",l[a.FILTER__RESOURE_TYPE]="resource type",e=function(a){a&&a.$collection?(c=a.$collection,d=c.slice(),i=a.$total):(c=[],d=[],i=0),a&&a.$filterTags?(m=a.$filterTags,n=m.slice()):(m=[],n=[])},f=function(b){var e,f,g,i;for(e=0;e<d.length;++e)-1===c.indexOf(d[e])&&c.push(d[e]);if(b&&b.isValid())if(b.parameter===a.FILTER__POST_SEARCH_FILTERS)for(e=0;e<b.value.length;++e)f=b.value[e].split(j),g=f[1],i=f[2],g&&i&&(g=0===g.indexOf("!")?g.substr(1):g,h(k(g),i));else if(g=0===b.parameter.indexOf("!")?b.parameter.substr(1):b.parameter,b.isMultiple())for(e=0;e<b.value.length;++e)h(k(g),i[e]);else h(k(g),i)},k=function(a){var b;return b=l[a],b||a},h=function(a,b){var e,f,h;if(d&&c&&d.length>0)for(e=0;e<d.length;e++)h=d[e],f=c.indexOf(h),g(null,h.object,a,b)&&-1!==f&&c.splice(f,1)},o=function(){var a,b,d,e,f,h,i,j,k;for(m=n.slice(),a=0;a<m.length;++a)if(e=m[a],e&&e.value&&e.value.length>0)for(f=e.key,h=e.value,b=0;b<h.length;b++){for(j=h[b].key,k=0,d=0;d<c.length;d++)i=c[d],g(null,i.object,f,j)&&k++;h[b].value=k}},g=function(a,b,c,d){var e,f;if(a&&b&&b.hasOwnProperty("taggroup")){if(b.taggroup.name===c&&b.name===d)return!0}else if(b&&"object"==typeof b)for(e in b)if(b.hasOwnProperty(e)&&(f=b[e],f&&"object"==typeof b&&g(b,f,c,d)))return!0;return!1},{setResultSet:e,getTotalResourcesNumber:function(){return i},getFilteredResourcesNumber:function(){return d.length-c.length},getLoadedResourcesNumber:function(){return d.length},isCompleteResult:function(){return d&&d.length>0&&d.length===i},filterResultSet:f}}]),angular.module("eu.water-switch-on.sip.services").factory("eu.water-switch-on.sip.services.masterToolbarService",[function(){"use strict";var a,b,c,d,e,f;return a=!1,e=!1,f=function(b){return e=a?b?b:!e:!1},c=function(){return a},d=function(b){a=b},b=function(){return e},{isShowing:b,getCanShow:c,setCanShow:d,toggleVisibility:f}}]),angular.module("eu.water-switch-on.sip.services").factory("eu.water-switch-on.sip.services.MockService",["$resource",function(a){"use strict";var b,c,d,e,f,g,h,i,j,k;return b=a("data/resultSet.json",{}),c=a("data/xcuahsiKeywords.json",{},{query:{method:"GET",params:{},isArray:!0}}),d=a("data/inspireKeywords.json",{},{query:{method:"GET",params:{},isArray:!0}}),e=a("data/inspireTopics.json",{},{query:{method:"GET",params:{},isArray:!0}}),f=a("data/keywords.json",{},{query:{method:"GET",params:{},isArray:!0}}),g=a("data/countriesEurope.json",{},{query:{method:"GET",params:{},isArray:!1}}),h=a("data/countriesWorld.json",{},{query:{method:"GET",params:{},isArray:!1}}),i=function(){return b.get()},j=function(a){switch(a){case"xcuahsi_keyword":return c.query();case"inspire_keyword":return d.query();case"inspire_topic":return e.query();case"keyword":return f.query();default:return null}},k=function(a){switch(a){case"countries_world":return h.query();case"countries_europe":return g.query();default:return null}},{search:i,loadKeywordList:j,loadCountriesList:k}}]),angular.module("eu.water-switch-on.sip.services").factory("eu.water-switch-on.sip.services.SearchService",["$resource","eu.water-switch-on.sip.services.Base64","$q","$interval","AppConfig",function(a,b,c,d,e){"use strict";var f,g,h,i,j;return f=e.searchService,g=b.encode(f.username+":"+f.password),i=a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.MetaObjectUniversalSearchStatement/results",{limit:20,offset:0,omitNullValues:!0,deduplicate:!0},{search:{method:"POST",params:{limit:"@limit",offset:"@offset"},isArray:!1,headers:{Authorization:"Basic "+g}}}),h=a(f.host+"/SWITCHON.:classname/:objId",{omitNullValues:!0,deduplicate:!1},{get:{method:"GET",isArray:!1,headers:{Authorization:"Basic "+g}}}),j=function(b,e,j,k,l){var m,n,o,p,q,r,s,t,u,v,w;return n=angular.noop,m=c.defer(),o={list:[{key:"Query",value:b}]},e&&e.length>0?-1===e.indexOf("$total")&&(e+=",$total"):e="$total",(l||n)(0,-1,"success"),u=1,t=d(function(){(l||n)(u,-1,"success"),u++},100,100),k&&j&&j>0&&k>0&&k%j!==0&&(k=0),p={$promise:m.promise,$resolved:!1,$offset:k,$limit:j,$length:0},r=i.search({limit:j,offset:k},o),s=function(b){var e,i,j;j=b[0].$collection,i=function(a){var e,f,g,i,k,o,q,s,u,v,w;for(g=[],k=0;k<a.$collection.length;++k)g[a.$collection[k].key]=a.$collection[k].value;for(q=[],v=0,j.length>0?w=!0:d.cancel(t),(l||n)(v,j.length,"success"),u=function(){w===!0&&(w=!d.cancel(t)),(l||n)(++v,j.length,"success")},k=0;k<j.length;++k)i=g[j[k].LEGACY_CLASS_ID],o=j[k].LEGACY_OBJECT_ID,s=h.get({classname:i,objId:o}).$promise,s["finally"](u),q[k]=s;f=function(a){var c,d,e;for(k=0;k<j.length;++k)j[k].object=a[k];for(c in r)!r.hasOwnProperty(c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(p[c]=r[c]);if(e=b[1].$collection,e&&e.length>0)for(k=0;k<e.length;k++)if(d=e[k],"$total"===d.key&&d.value&&1===d.value.length){p.$total=parseInt(d.value[0].value,10),e.splice(k,1);break}p.$length=j.length,p.$total&&0!==p.$total||(p.$total=j.length),p.$filterTags=b[1].$collection,m.resolve(p)},e=function(a){p.$error="cannot lookup objects",p.$response=a,p.$resolved=!0,m.reject(p),d.cancel(t),(l||n)(1,1,"error")},c.all(q).then(f,e)},e=function(a){p.$error="cannot lookup class names",p.$response=a,p.$resolved=!0,m.reject(p),d.cancel(t),(l||n)(1,1,"error")},a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.ClassNameSearch/results",{},{exec:{method:"POST",isArray:!1,headers:{Authorization:"Basic "+g}}}).exec({list:[{key:"Domain",value:"SWITCHON"}]}).$promise.then(i,e)},q=function(a){p.$error="cannot search for resources",p.$response=a,p.$resolved=!0,m.reject(p),d.cancel(t),(l||n)(1,1,"error")},e&&e.length>0?(v=a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.PostFilterTagsSearch/results",{},{exec:{method:"POST",isArray:!1,headers:{Authorization:"Basic "+g}}}),v=v.exec({list:[{key:"Query",value:b},{key:"FilterTagGroups",value:e}]})):(w=c.defer(),v={},v.$collection=[],v.$promise=w.promise,v.$resolved=!0,w.resolve(v)),c.all([r.$promise,v.$promise]).then(s,q),p},{search:j,entityResource:h}}]).factory("eu.water-switch-on.sip.services.Base64",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){var c,d,e,f,g,h="",i="",j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),i=b.charCodeAt(k++),e=c>>2,f=(3&c)<<4|d>>4,g=(15&d)<<2|i>>6,j=63&i,isNaN(d)?g=j=64:isNaN(i)&&(j=64),h=h+a.charAt(e)+a.charAt(f)+a.charAt(g)+a.charAt(j),c=d=i="",e=f=g=j="";while(k<b.length);return h},decode:function(b){var c,d,e,f,g,h="",i="",j="",k=0,l=/[^A-Za-z0-9\+\/\=]/g;l.exec(b)&&console.error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=a.indexOf(b.charAt(k++)),f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),j=a.indexOf(b.charAt(k++)),c=e<<2|f>>4,d=(15&f)<<4|g>>2,i=(3&g)<<6|j,h+=String.fromCharCode(c),64!==g&&(h+=String.fromCharCode(d)),64!==j&&(h+=String.fromCharCode(i)),c=d=i="",e=f=g=j="";while(k<b.length);return h}}}),angular.module("eu.water-switch-on.sip.services").factory("eu.water-switch-on.sip.services.sessionService",["$rootScope",function(a){"use strict";var b,c,d,e,f,g;return b="Anonymous",d=function(){return{name:b}},e=function(){return c},f=function(a){return a&&a.name?b===a.name:!1},g=function(b){var d;if(d=c,!b)throw"invalid user: "+b;c=b,a.$broadcast("userChanged",d,c)},g(d()),{getAnonymousUser:d,getCurrentUser:e,isAnonymousUser:f}}]),angular.module("eu.water-switch-on.sip.services").factory("eu.water-switch-on.sip.services.shareService",[function(){"use strict";var a;return{getResourceObjects:function(){return a},setResourceObjects:function(b){a=b}}}]),angular.module("eu.water-switch-on.sip.services").factory("eu.water-switch-on.sip.services.TagGroupService",["$resource","eu.water-switch-on.sip.services.Base64","AppConfig",function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n;return d={"keyword-inspire":"data/inspireKeywords.json","topic-inspire":"data/inspireTopics.json","keyword-free":"data/freeKeywords.json","keyword-all":"data/allKeywords.json","country-world":"data/countriesWorld.json","country-europe":"data/countriesEurope.json","category-default":"data/defaultCategories.json","category-collection":"data/collectionCategories.json"},l={"keyword-x-cuahsi":"X-CUAHSI"},e={},j=c.searchService,k=b.encode(j.username+":"+j.password),m=a(j.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.ResourceTagsSearch/results",{limit:20,offset:0,omitNullValues:!0,deduplicate:!0},{search:{method:"POST",params:{},isArray:!1,headers:{Authorization:"Basic "+k}}}),n=function(a){var b,c;return b={list:[{key:"taggroup",value:a}]},c=m.search({},b)},f=function(b,c){var f,g,h,i;return e.hasOwnProperty(b)?e[b]:d.hasOwnProperty(b)?(h=a(d[b],{},{query:{method:"GET",params:{},isArray:c}}),e[b]=h.query(),e[b]):l.hasOwnProperty(b)?(f=n(l[b]),g=[],g.$resolved=!1,g.$promise=f.$promise.then(function(a){for(i=0;i<a.$collection.length;i++)g.push(a.$collection[i]);return g.$resolved=!0,g}),e[b]=g,e[b]):(console.warn("unknown tag group:"+b),null)},g=function(a){return f(a,!0)},h=function(a){return f(a,!1)},i=function(a){return f(a,!0)},{getKeywordList:g,getCountryList:h,getCategoryList:i}}]),angular.module("").run(["$templateCache",function(a){"use strict";a.put("templates/categories-directive-popup.html",'<div ng-class={expanded:categoriesDirectiveController.expanded} class="popover switchon-categories-popover" id=categories-popover ng-mouseleave="\r\n         categoriesDirectiveController.expanded = false; \r\n         categoriesDirectiveController.selectedCategory=null;"><div class=popover-content><div class=switchon-categories-list><div class=switchon-categories-list><ul class=list-group><li class=list-group-item><span ng-style="{\'font-weight\': \r\n                                categoriesDirectiveController.selectedCategory === \'category-collection\' ? \r\n                               \'bold\' : \'plain\'}">Data Collections</span> <i class="glyphicon glyphicon-chevron-right" ng-mouseenter="categoriesDirectiveController.expanded = true;\r\n                                   categoriesDirectiveController.selectedCategory = \'category-collection\'"></i><p><small><small>Browse open hydrological data by popular data collections.</small></small></p></li><li class=list-group-item><span ng-style="{\'font-weight\': \r\n                                categoriesDirectiveController.selectedCategory === \'topic-inspire\' ? \r\n                            \'bold\' : \'plain\'}">Topic Categories</span> <i class="glyphicon glyphicon-chevron-right" ng-mouseenter="categoriesDirectiveController.expanded = true;\r\n                                   categoriesDirectiveController.selectedCategory = \'topic-inspire\'"></i><p><small><small>Browse open hydrological data by INSPIRE Topic Categories.</small></small></p></li></ul></div></div><div ng-if="categoriesDirectiveController.expanded && \r\n                    categoriesDirectiveController.selectedCategory !== null" class="switchon-categories-list switchon-sub-categories-list"><ul class=list-group><li class=list-group-item ng-repeat="category in categoriesDirectiveController.getCategories(categoriesDirectiveController.selectedCategory)"><a ng-click="$hide(); categoriesDirectiveController.performCategoriesSearch(categoriesDirectiveController.selectedCategory, category);">{{category}}</a></li></ul></div></div></div>'),a.put("templates/categories-directive-template.html",'<div class="nav navbar-nav btn-group"><button type=button class="btn navbar-btn switchon-categories-button navbar-left" template=templates/categories-directive-popup.html placement=bottom-left auto-close=1 bs-popover=true id=categories-button><strong>All categories</strong> <span class=caret></span></button></div>'),a.put("templates/countries-filter-directive.html",'<div class="panel panel-default"><div class=panel-body><select name={{countryGroup}} id={{countryGroup}} ng-model=filterExpression.selectedCountry ng-options="country as country for (country, geom) in countryList" class=form-control size=8 multiple></select></div></div>'),a.put("templates/datefilter-directive.html",'<div class="panel panel-default"><div class=panel-heading>Date Filter</div><div class=panel-body><form class=form name=dateFilterBox role=form novalidate><div class=form-group><label for=fromDateField>Start Date:</label><input class=form-control name=fromDateField id=fromDateField type=date placeholder=yyyy-MM-dd ng-model="fromDateFilterExpression.value"></div><div class=form-group><label for=toDateField>End Date:</label><input class=form-control name=toDateField id=toDateField type=date placeholder=yyyy-MM-dd ng-model="toDateFilterExpression.value"></div></form></div></div>'),a.put("templates/filter-expression-editor-popup.html",'<div class="popover switchon-ribbon-popover" id=filterExpressionEditor><div class=arrow></div><div class=popover-content ng-init="enumeratedTags = tag.origin.enumerateTags()"><span style="float:left; padding-bottom: 0.5em" ng-repeat="subtag in enumeratedTags" search-filter-tag tag=subtag></span></div></div>'),a.put("templates/geo-buffer-editor-popup.html",'<div class="popover switchon-ribbon-popover" id=geoBufferEditor><div class=arrow></div><div class=popover-content><form name=geoBufferForm id=geoBufferForm novalidate><div class=form-group ng-class="{\'has-error\': geoBufferForm.geoBufferField.$invalid}"><input type=number class=form-control min=0 max=99999 name=geoBufferField id=geoBufferField placeholder=buffer ng-model=data.editorValue> <span title=Cancel aria-label=Cancel name=cancelButton id=cancelButton class="btn btn-default" ng-click=$hide()><span class="glyphicon glyphicon-remove"></span></span> <span title=Apply aria-label=Apply name=applyButton id=clearButton class="btn btn-default" ng-click="tag.origin.value = data.editorValue; $hide()" ng-disabled=geoBufferForm.geoBufferField.$invalid><span class="glyphicon glyphicon-ok"></span></span></div></form></div></div>'),a.put("templates/geo-editor-popup.html",'<div class="popover switchon-ribbon-popover" id=geoEditor><div class=arrow></div><div class=popover-content><form name=geoForm id=geoForm novalidate><div class=form-group ng-class="{\'has-error\': geoForm.geoBufferField.$invalid}"><input class=form-control size=30 name=geoField id=geoField placeholder="WKT String" ng-model=data.editorValue> <span title=Cancel aria-label=Cancel name=cancelButton id=cancelButton class="btn btn-default" ng-click=$hide()><span class="glyphicon glyphicon-remove"></span></span> <span title=Apply aria-label=Apply name=applyButton id=clearButton class="btn btn-default" ng-click="tag.origin.setStringValue(data.editorValue); $hide()" ng-disabled=geoForm.geoField.$invalid><span class="glyphicon glyphicon-ok"></span></span></div></form></div></div>'),a.put("templates/keyword-filter-directive.html",'<select ng-if="multiple === \'true\'" name={{keywordGroup}} id={{keywordGroup}} ng-model=filterExpression.value ng-options="keyword for keyword in keywordList" class=form-control size=11 multiple></select><select ng-if="multiple !== \'true\'" name={{keywordGroup}} id={{keywordGroup}} ng-model=filterExpression.value ng-options="keyword for keyword in keywordList" class=form-control size=11><option value="">none</select>'),a.put("templates/limit-editor-popup.html",'<div class="popover switchon-ribbon-popover" id=limitEditor><div class=arrow></div><div class=popover-content><form name=limitForm id=limitForm novalidate><div class=form-group ng-class="{\'has-error\': limitForm.limitField.$invalid}"><input type=number class=form-control min=1 max=50 name=limitField id=limitField placeholder=limit ng-model=data.editorValue ng-init="data.applyChangesOnClose = false"> <span title=Cancel aria-label=Cancel name=cancelButton id=cancelButton class="btn btn-default" ng-click=$hide()><span class="glyphicon glyphicon-remove"></span></span> <span title=Apply aria-label=Apply name=applyButton id=clearButton class="btn btn-default" ng-click="tag.origin.value = data.editorValue; $hide()" ng-disabled=limitForm.limitField.$invalid><span class="glyphicon glyphicon-ok"></span></span></div></form></div></div>'),a.put("templates/list-view-directive.html",'<table ng-table=tableParams class="table table-striped table-bordered table-hover"><tr ng-repeat="node in $data"><td data-title="\'Name\'" class=name sortable>{{node.object.name | txtLen:160:false:\'...\':true}}<td data-title="\'Description\'"><span>{{node.object.description | txtLen:160:false:\'\':true}}</span> <span ng-hide="node.object.description.length < 160"><a href=#/resource/{{node.object.id}} title="Show the complete Description"><strong>...</strong></a></span><td data-title="\'Temporal Extent\'" class=date sortable>{{node.object.fromdate | date: "dd.MM.yyyy"}} - {{node.object.todate | date: "dd.MM.yyyy"}}<td data-title="\'Keywords\'" class=tags><span ng-repeat="tag in tags = (node.object.tags | orderBy:\'name\' | limitTo:config.keywordsLimit)"><span ng-hide="config.filterKeyword && !(tag.taggroup.name === config.filterKeyword)" class=label ng-class="isHighlightKeyword(config.highlightKeyword, tag.name) ? \'label-success\' : \'label-default\'">{{tag.name}}</span></span> <span ng-if="tags.length < node.object.tags.length"><a href=#/resource/{{node.object.id}} title="Show all Keywords"><strong>...</strong></a></span><td data-title="\'Tools\'" class=tools><a class="btn-invisible btn-icon" href=#/resource/{{node.object.id}} title="Show detailed resource information"><i class="glyphicon glyphicon-info-sign"></i></a> <a class="btn-invisible btn-icon" title="Show resource on the on the map" ng-click="$parent.$parent.selectedObject = $index" href=#/map><i class="glyphicon glyphicon-globe"></i></a> <span ng-repeat="representation in node.object.representation | filter:{function:\'download\', type:\'original data\'}" class=btn-invisible><a href={{representation.contentlocation}} download rel=nofollow title="Download {{representation.contentlocation.substr(representation.contentlocation.lastIndexOf(\'/\')+1)}} ({{(representation.contenttype) ? representation.contenttype.name : \'application/octet-stream\'}})" type="{{(representation.contenttype) ? representation.contenttype.name : \'application/octet-stream\'}}"><i class="glyphicon glyphicon-download"></i></a></span></table>'),a.put("templates/map-view-directive.html","<div><leaflet id=mainmap defaults=defaults center=center width={{currentWidth}} height={{currentHeight}}></leaflet></div>"),a.put("templates/master-toolbar-template.html","<div class=switchon-master-toolbar ng-class=\"{'switchon-master-toolbar-toggled': masterToolbarService.getCanShow() && masterToolbarService.isShowing()}\"><result-pager result-set=resultSet search-function=performSearch() filter-expressions=filterExpressions></result-pager><result-list result-set=resultSet selected-object=selectedObject></result-list><postsearchfilter filter-expressions=filterExpressions post-search-filter-expressions=postSearchFilterExpressions post-search-filters-filter-expression=postSearchFiltersFilterExpression filter-tags=filterTags search-function=performSearch() notification-function=notificationFunction() remove-threshold=resultSet.$total></postsearchfilter></div>"),a.put("templates/my-profile-directive.html",'<div class=page-header style="text-align: center"><h1>You are: <span class="glyphicon glyphicon-user" aria-hidden=true></span> \'{{user.name}}\' <small>However, the profile page is yet to come</small></h1></div><div class=container><div class=row><div class=col-sm-12><div class=thumbnail><img src=images/under_construction_icon-green.svg alt="Under Construction"><div style="margin:auto; width:600px"><h2>This feature is currently under construction!</h2></div></div></div></div></div>'),a.put("templates/my-workspace-directive.html",'<div class="btn-group nav navbar-nav navbar-right" dropdown is-open=status.isopen ng-mouseenter=popup(true) ng-mouseleave=popup(false)><button class="btn btn-xs navbar-btn dropdown-toggle ws-button" data-toggle=dropdown role=button type=button aria-expanded=false ng-click=showProfile()><div>Hello {{user.name}}</div><b>My {{workspaceName}} <span class=caret></span></b></button><ul class="dropdown-menu hoverdropdown" role=menu><li><a ui-sref=profile>My profile</a></li><li class=divider></li><li><a ui-sref=login ng-show=sessionService.isAnonymousUser(user)>Log in</a> <a ui-sref=login ng-hide=sessionService.isAnonymousUser(user)>Not {{user.name}}? Log out</a></li></ul></div>'),a.put("templates/object-representation-template.html","<accordion close-others=false><accordion-group ng-repeat=\"rep in reps | filter:{type:'original data'}\" is-open=rep._status.open ng-init=\"filename = rep.contentlocation.substr(rep.contentlocation.lastIndexOf('/')+1)\"><accordion-heading>{{rep.name}} <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': rep._status.open, 'glyphicon-chevron-right': !rep._status.open}\"></i></accordion-heading><div class=row ng-if=rep.temporalresolution><div class=col-lg-3 title=\"Temporal resolution of the data, e.g. daily\"><label>Temporal resolution:</label></div><div class=col-lg-9>{{rep.temporalresolution || 'n/a'}}</div></div><div class=row ng-if=rep.spatialresolution><div class=col-lg-3 title=\"Spatial resolution of the data, e.g. meters or arc degrees.\"><label>Spatial resolution:</label></div><div class=col-lg-9>{{rep.spatialresolution || 'n/a'}}</div></div><div class=row ng-if=rep.spatialscale><div class=col-lg-3 title=\"Spatial scale of the data, e.g. 1:2000 or  1:10000\"><label>Spatial scale:</label></div><div class=col-lg-9>{{rep.spatialscale || 'n/a'}}</div></div><div class=row ng-if=rep.contenttype><div class=col-lg-3 title=\"MIME Type of the resource representation\"><label>Mime type:</label></div><div class=col-lg-9 title=\"{{rep.contenttype.description || 'n/a'}}\">{{rep.contenttype.name || 'n/a'}}</div></div><div class=row ng-if=rep.function><div class=col-lg-3 title=\"Function that can be performed following the link to the resource representation\"><label>Data access function:</label></div><div class=col-lg-9 title=\"{{rep.function.description || 'n/a'}}\">{{rep.function.name || 'n/a'}}</div></div><div class=row ng-if=rep.contentlocation><div class=col-lg-3 title=\"Link to the data or website where the data can be obtained\"><label>Data access link:</label></div><div class=col-lg-9><a href={{rep.contentlocation}} target=_blank rel=nofollow type=\"{{(rep.contenttype) ? rep.contenttype.name : 'application/octet-stream'}}\" ng-disabled=!rep.contentlocation>{{(filename && filename.indexOf('.') !== -1) ? filename : rep.name}}</a></div></div></accordion-group></accordion>"),a.put("templates/post-search-filter-directive.html",'<accordion class=switchon-toolbar-component close-others=!config.expandPostSearchFilters ng-show=isVisible><accordion-group ng-repeat="filterExpression in postSearchFilterExpressions.list | filter:{valid:true}" ng-init="filterExpression._status.open = config.expandPostSearchFilters" is-open=filterExpression._status.open><accordion-heading><strong>{{filterExpression.getName()}}<strong><i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': filterExpression._status.open, \'glyphicon-chevron-up\': !filterExpression._status.open}"></i></strong></strong></accordion-heading><span style="float:left; padding-bottom: 0.5em" ng-repeat="tag in filterExpression.enumeratedTags" search-filter-tag tag=tag remove-threshold=removeThreshold></span></accordion-group></accordion>'),a.put("templates/result-pager-template.html",'<div class="switchon-toolbar-component switchon-result-pager" ng-show=isVisible><span class=switchon-result-pager-title><strong>Resources</strong> <span title="Showing {{resultSet.$length}} of {{resultSet.$total}} resources" ng-show="resultSet && resultSet.$length && resultSet.$length > 0">({{resultSet.$total}})</span></span><ul class="pagination pagination-sm pull-right"><li ng-class="{disabled: !hasPrevious()}"><a title="Show previous {{resultSet.$limit}} resources" aria-label=Previous ng-show=hasPrevious() ng-click=previous()><span aria-hidden=true>&laquo;</span></a></li><li ng-class="{disabled: !hasNext()}"><a title="Show next {{resultSet.$limit}} resources" aria-label=Next ng-show=hasNext() ng-click=next()><span aria-hidden=true>&raquo;</span></a></li></ul></div>'),a.put("templates/resultlist-directive.html","<div class=\"switchon-toolbar-component switchon-result-list\" ng-show=isVisible><ul class=list-group><li class=list-group-item ng-repeat=\"node in resultSet.$collection\"><span class=btn-link ng-style=\"{'font-weight': $parent.selectedObject === $index ? 'bold' : 'plain'}\" ng-click=\"$parent.selectedObject = $index\">{{node.name | txtLen:35:false:'...':true}}</span><p><small><small>{{node.object.description| txtLen:80:false:'...':true}}</small></small></p></li></ul></div>"),a.put("templates/search-filter-ribbon-directive.html",'<button type=button id=search-filter-directive-button class="btn btn-default navbar-btn navbar-left" template=templates/search-filter-ribbon-popup.html placement=bottom-left auto-close=1 bs-popover=true>Search Filter <span class=caret></span></button>'),a.put("templates/search-filter-ribbon-popup.html",'<div class="popover switchon-ribbon-popover"><div class=arrow></div><h3 class=popover-title ng-bind=title ng-show=title></h3><div class=popover-content><div class=switchon-ribbon><div class=switchon-ribbon-panel><div class="btn-group switchon-keywordgroup" dropdown is-open=keywordFilters.isopen><button type=button class="btn btn-default dropdown-toggle" dropdown-toggle ng-init="keywordFilters.keywordGroup = \'X-CUAHSI Keywords\'" style=width:100%>{{keywordFilters.keywordGroup}} <span class=caret></span></button><ul class=dropdown-menu role=menu><li><label class=btn ng-model=keywordFilters.keywordGroup btn-radio="\'X-CUAHSI Keywords\'" ng-click="keywordFilters.isopen = !keywordFilters.isopen" title="X-CUAHSI keywords build on a hierarchical keyword selection from the hydrologic ontology developed by CUAHSI, with additional hierarchical keywords for relevant non-hydrosphere data.">X-CUAHSI Keywords</label></li><li><label class=btn ng-model=keywordFilters.keywordGroup btn-radio="\'TOPIC Categories\'" ng-click="keywordFilters.isopen = !keywordFilters.isopen" title="INSPIRE Topic Categories available in the SWITCH-ON Meta-Data Repository">TOPIC Categories</label></li></ul></div><keyword-filter ng-show="keywordFilters.keywordGroup === \'X-CUAHSI Keywords\'" class=ng-hide filter-expression=keywordsCuashiFilterExpression keyword-group=keyword-x-cuahsi multiple title="X-CUAHSI keywords build on a hierarchical keyword selection from the hydrologic ontology developed by CUAHSI, with additional hierarchical keywords for relevant non-hydrosphere data."></keyword-filter><keyword-filter ng-show="keywordFilters.keywordGroup === \'TOPIC Categories\'" class=ng-hide filter-expression=topicFilterExpression keyword-group=topic-inspire multiple title="INSPIRE Topic Categories available in the SWITCH-ON Meta-Data Repository"></keyword-filter></div><div class="switchon-ribbon-panel last"><search-options geo-intersects-filter-expression=geoIntersectsFilterExpression geo-buffer-filter-expression=geoBufferFilterExpression limit-filter-expression=limitFilterExpression></search-options></div><div class=switchon-ribbon-footer><span title="Close the Search Filter Dialog" aria-label=Close name=closeButton id=closeButton class="btn btn-default" ng-click=$hide()><span class="glyphicon glyphicon-remove"></span></span> <span title="Clear all Search Filters" aria-label=Clear name=clearButton id=clearButton class="btn btn-default" ng-disabled="((filterExpressions.enumeratedTags.length < 1)\r\n                      && (!textFilterExpression.value || textFilterExpression.value.length < 3))" ng-click=clear()><span class="glyphicon glyphicon-trash"></span></span> <span title="Search for resources" aria-label=Search name=searchButton id=searchButton class="btn btn-primary" ng-disabled="((filterExpressions.enumeratedTags.length < 1)\r\n                      && (!textFilterExpression.value || textFilterExpression.value.length < 3))" ng-click="$hide(); performSearch()(0, config.clearPostSearchFilters)"><span class="glyphicon glyphicon-search"></span></span></div></div></div></div>'),a.put("templates/search-filter-tag-directive-template.html",'<span class="tag label" ng-class="getTagStyle(tag.getType(), false, highlightNegated)"><span ng-class=getTagIcon(tag.getType()) title={{tag.getTitle()}}></span> <span ng-if=!tag.isEditable()>{{tag.getDisplayValue()}}</span> <span ng-if=tag.isEditable() bs-popover template={{tag.getEditor()}} placement=bottom auto-close=1>{{tag.getDisplayValue(data.editorValue)}}</span> <span ng-if="tag.getCardinality() > 0"><small><em>({{tag.getCardinality()}})</em></small></span> <a ng-if=tag.isRemoveable(removeThreshold) title=delete><i ng-click=tag.remove() class="glyphicon glyphicon-remove"></i></a></span>'),a.put("templates/search-options-directive.html",'<div class="panel panel-default"><div class=panel-heading>Options</div><div class=panel-body><form name=optionsForm id=optionsForm novalidate><div class=form-group><label for=geoIntersectsOption>Geospatial Search</label><div class=form-inline><div class=radio title="Find resources that intersect with the geospatial search area"><label><input name=geoIntersectsOption id=geoIntersectsOption type=radio ng-model=geoIntersectsFilterExpression.value value=true> Intersects</label></div><div class=radio title="Find resources that are enclosed in the geospatial search area"><label><input name=geoEnclosesOption id=geoEnclosesOption type=radio ng-model=geoIntersectsFilterExpression.value value=false> Encloses</label></div></div></div></form></div></div>'),a.put("templates/search-progress-modal-template.html",'<div class=modal-header><center><h4>Please wait, search is in progress.</h4></center></div><div class=modal-body><progressbar class="progress-striped active" max=200 value=status.current type={{status.type}}></progressbar><span><i>{{status.message}}</i></span></div><div class=modal-footer></div>'),a.put("templates/usb-directive.html",'<form class="navbar-form navbar-left" name=universalSearchBox id=universalSearchBox role=search novalidate><div class=form-group ng-class="{\'has-error\': !universalSearchBox.filterExpressionInput.$error.required\r\n                         && universalSearchBox.filterExpressionInput.$invalid}"><div class="form-control usb-form-control"><div class=usb-tag-container><span ng-repeat="tag in filterExpressions.enumeratedTags" search-filter-tag tag=tag highlight-negated=true></span></div><div class=usb-input-container><input class=switchon-usb-input name=filterExpressionInput id=filterExpressionInput placeholder="Please enter a query" ng-model=textFilterExpression.value required></div></div><button ng-click="performSearch()(0, config.clearPostSearchFilters)" ng-disabled="((filterExpressions.enumeratedTags.length === 0) \r\n                        && (!textFilterExpression.value || textFilterExpression.value.length < 3))" class="btn btn-primary"><span class="glyphicon glyphicon-search" aria-hidden=true></span></button></div><p class="help-block error" ng-show="notificationFunction === undefined && !universalSearchBox.filterExpressionInput.$error.required\r\n                        && universalSearchBox.filterExpressionInput.$invalid">This filter expression is not valid. Try <strong>expression</strong><strong>:</strong><i>"parameter"</i>, e.g. keyword:"water quality".</p><p class="help-block info" ng-show="notificationFunction === undefined &&\r\n                        universalSearchBox.filterExpressionInput.$error.required">Please enter a filter expression, e.g. keyword:"water quality".</p></form>')
}]);
//# sourceMappingURL=sip-html5.min.js.map